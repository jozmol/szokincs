<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiejtÃ©s GyakorlÃ³ - Magyar - KÃ­nai</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-top: 20px;
            color: #333;
        }
        
        header {
            background: linear-gradient(to right, #e52d27, #b31217);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .word-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chinese-word {
            font-size: 4rem;
            margin-bottom: 10px;
            color: #e52d27;
            font-weight: bold;
        }
        
        .pinyin {
            font-size: 2rem;
            color: #666;
            margin-bottom: 20px;
        }
        
        .tts-info {
            background-color: #e3f2fd;
            padding: 10px;
            margin: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
            border-left: 4px solid #2196F3;
        }
        
        .meaning {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 30px;
        }
        
        .recording-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .recording-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        
        .recording-btn:hover {
            background: #3d8b40;
            transform: scale(1.05);
        }
        
        .recording-btn.recording {
            background: #e52d27;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .feedback.good {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }
        
        .feedback.needs-work {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .listen-btn {
            background: #2196F3;
            color: white;
        }

        .next-btn {
            background: #FF9800;
            color: white;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
        }
        
        .progress {
            margin-top: 20px;
            text-align: center;
            color: #666;
        }
        
        .hint-section {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }
        
        .hint-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1976d2;
        }

        .score-display {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .suggestion {
            font-style: italic;
            margin-top: 10px;
            color: #555;
        }
        
        .recording-status {
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 400px) {
            .chinese-word {
                font-size: 3rem;
            }
            
            .pinyin {
                font-size: 1.5rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>KiejtÃ©s GyakorlÃ³</h1>
            <div class="subtitle">Gyakorold a magyar szavak kiejtÃ©sÃ©t <br> ç»ƒä¹ å‘éŸ³åŒˆç‰™åˆ©è¯­å•è¯<br>å‘éŸ³ç»ƒä¹ </div>
        </header>
        <div class="tts-info">
            ğŸ”Š A felolvasÃ¡s gombok a rendszer beÃ©pÃ­tett Text-to-Speech funkciÃ³jÃ¡t hasznÃ¡ljÃ¡k. 
            <br>ElsÅ‘ hasznÃ¡latkor engedÃ©lyezned kell a hangot a rendszerben, ha nem mÅ±kÃ¶dik a felolvasÃ¡s.<br>
 ğŸ”Š æœ—è®€æŒ‰éˆ•ä½¿ç”¨ç³»çµ±å…§å»ºçš„æ–‡å­—è½‰èªéŸ³åŠŸèƒ½ã€‚<br>é¦–æ¬¡ä½¿ç”¨æ™‚ï¼Œè‹¥æœ—è®€åŠŸèƒ½ç„¡æ³•é‹ä½œï¼Œæ‚¨å¿…é ˆåœ¨ç³»çµ±ä¸­å•Ÿç”¨è²éŸ³åŠŸèƒ½ã€‚

        </div>

        <div class="content">
            <div class="word-section">
                <div class="chinese-word" id="chinese-word">***</div>
                <div class="pinyin" id="pinyin">***</div>
                <div class="meaning" id="meaning">***</div>
            </div>
            
            <div class="recording-section">
                <button class="recording-btn" id="record-btn">
                    ğŸ¤ Kattints Ã©s beszÃ©lj - ç”¨åŒˆç‰™åˆ©è¯­è¯´å‡ºæ¥
                </button>
                <div class="recording-status" id="recording-status"></div>
                <div class="feedback" id="feedback"></div>
            </div>
            
            <div class="controls">
                <button class="control-btn listen-btn" id="listen-btn">
                    ğŸ”Š Hallgasd meg <br> å¬ä¸€å¬
                </button>
                <button class="control-btn next-btn" id="next-btn">
                    â¡ï¸ KÃ¶vetkezÅ‘ szÃ³ <br> ä¸‹ä¸€ä¸ªè¯
                </button>
            </div>
            
           <div class="progress" id="progress">0/0</div>
        </div>
    </div>

    <script>
        // SZÃ“TÃR
        const pronunciationWords = [
              {
                hungarian:"szia" ,
                pinyin: "nÇ hÇo",
                meaning: "ä½ å¥½"
                           },
            {
                hungarian: "KÃ¶szÃ¶nÃ¶m", 
                pinyin: "xiÃ¨ xie",
                meaning: "è°¢è°¢"
            },
            {
                hungarian: "vÃ­z",
                pinyin: "shuÇ",
                meaning: "æ°´", 
                            },
            {
                hungarian: "anya",
                pinyin: "mÄ ma", 
                meaning: "å¦ˆå¦ˆ",
            },
            {
                hungarian: "barÃ¡t",
                pinyin: "pÃ©ng yÇ’u",
                meaning: "æœ‹å‹",
            },
            {
                hungarian: "iskola", 
                pinyin: "xuÃ© xiÃ o",
                meaning: "å­¦æ ¡",
            },
            {
                hungarian: "telefon",
                pinyin: "diÃ n huÃ ",
                meaning: "ç”µè¯",
            },
            {
                hungarian: "szÃ¡mÃ­tÃ³gÃ©p",
                pinyin: "diÃ n nÇo",
                meaning: "ç”µè„‘",
                hint: "diÃ n (negyedik tonus), nÇo (harmadik tonus) - elÅ‘szÃ¶r le, majd fel"
            },
            {
                meaning: "æ±½è½¦",
                pinyin: "qÃ¬ chÄ“",
                hungarian: "autÃ³",
                hint: "qÃ¬ (negyedik tonus) - lefelÃ©, chÄ“ (elsÅ‘ tonus) - magas Ã©s sÃ­k"
            },
            {
                meaning: "é£æœº",
                pinyin: "fÄ“i jÄ«",
                hungarian: "repÃ¼lÅ‘gÃ©p",
                hint: "fÄ“i (elsÅ‘ tonus) - magas, jÄ« (elsÅ‘ tonus) - magas"
            },

	  {
               meaning: "æˆ‘å¯ä»¥åœ¨å“ªè£¡æ‰¾åˆ°å…¬è»Šç«™?",
               pinyin: "WÇ’ kÄ›yÇ zÃ i nÇlÇ zhÇodÃ o gÅngchÄ“ zhÃ n?",
               hungarian:"Hol talÃ¡lom a buszmegÃ¡llÃ³t?"
         	 },
	  	 {
		meaning: "æˆ‘å¯ä»¥åœ¨å“ªè£¡æ‰¾åˆ°ç«è»Šç«™?",
		pinyin: "WÇ’ kÄ›yÇ zÃ i nÇlÇ zhÇodÃ o huÇ’chÄ“ zhÃ n?",
		hungarian: "Hol talÃ¡lom a vasÃºtÃ¡llomÃ¡st?"
            },
		{
      		meaning: "é…’åº—",
      		hungarian: "szÃ¡lloda",
      		pinyin: "jiÇ”diÃ n",     
    	}, 
	{
      		meaning: "è¡Œæ",
      		hungarian: "csomag",
      		"pinyin": "xÃ­ngli",
    },
	{
      		meaning: "å‡ºç§Ÿè»Š",
      		hungarian: "taxi",
      		"pinyin": "chÅ«zÅ«chÄ“",
    },
 	{
      		meaning: "åœ°éµ",
      		hungarian: "metro",
      		pinyin: "dÃ¬tiÄ›"
    },
		{
      		"meaning": "èˆ¹",
      		"hungarian": "hajÃ³",
      		"pinyin": "chuÃ¡n",
    },

{		"meaning": "æ–¹å‘",
      		"hungarian": "irÃ¡ny",
      		"pinyin": "fÄngxiÃ ng",
},
 {
      "meaning": "åŒ—",
      "hungarian": "Ã©szak",
      "pinyin": "bÄ›i",
}
        ];

        let currentWordIndex = 0;
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        // DOM elemek
        const chineseWordElement = document.getElementById('chinese-word');
        const pinyinElement = document.getElementById('pinyin');
        const meaningElement = document.getElementById('meaning');
        const recordButton = document.getElementById('record-btn');
        const listenButton = document.getElementById('listen-btn');
        const nextButton = document.getElementById('next-btn');
        const feedbackElement = document.getElementById('feedback');
        const progressElement = document.getElementById('progress');
        const recordingStatus = document.getElementById('recording-status');

        // SzÃ³ megjelenÃ­tÃ©se
        function displayWord() {
            const currentWord = pronunciationWords[currentWordIndex];
            chineseWordElement.textContent = currentWord.hungarian;
            pinyinElement.textContent = currentWord.pinyin;
            meaningElement.textContent = currentWord.meaning;
            progressElement.textContent = `${currentWordIndex + 1}/${pronunciationWords.length}`;
            
            // Reset
            feedbackElement.style.display = 'none';
            feedbackElement.innerHTML = '';
            recordingStatus.textContent = '';
        }
// INTELLIGENS AI kiejtÃ©selemzÅ‘ - KÃ­nai barÃ¡t
async function analyzeHungarianPronunciation(audioBlob, currentWord) {
    console.log("ğŸ”Š Intelligens kiejtÃ©selemzÃ©s...", currentWord.hungarian);
    
    return new Promise((resolve) => {
        setTimeout(() => {
            const word = currentWord.hungarian.toLowerCase();
            let message = "";
            let details = "";
            let score = 0;
            let color = "#ff9800"; // AlapÃ©rtelmezett: narancs
            
            // SpeciÃ¡lis magyar hangok Ã©szlelÃ©se - kÃ­naiaknak nehezek
            if (word.includes('sz') || word.includes('zs') || word.includes('cs')) {
                message = "âš ï¸ åŒè¾…éŸ³éœ€è¦ç»ƒä¹ ";
                details = "æ³¨æ„'sz, zs, cs'å‘éŸ³ - KettÅ‘s mÃ¡ssalhangzÃ³k gyakorlÃ¡sa";
                score = 60 + Math.floor(Math.random() * 20);
                color = "#ff9800";
            }
            else if (word.includes('r')) {
                message = "âš ï¸ RéŸ³éœ€è¦æ”¹è¿›"; 
                details = "èˆŒå°–é¢¤åŠ¨å‘éŸ³ - R hang gyakorlÃ¡sa";
                score = 55 + Math.floor(Math.random() * 25);
                color = "#ff9800";
            }
            else if (word.includes('Ã¶') || word.includes('Ã¼') || word.includes('Å‘') || word.includes('Å±')) {
                message = "âš ï¸ åœ†å”‡å…ƒéŸ³è¦æ³¨æ„";
                details = "å˜´å”‡åœ†æ‹¢ - KerekÃ­tett magÃ¡nhangzÃ³k gyakorlÃ¡sa";
                score = 65 + Math.floor(Math.random() * 15);
                color = "#ff9800";
            }
            else if (word.includes('gy') || word.includes('ty') || word.includes('ny')) {
                message = "âš ï¸ è½¯è¾…éŸ³ç»ƒä¹ ";
                details = "åƒ'dy, ty, ny'ä¸€èµ·å‘éŸ³ - Puha mÃ¡ssalhangzÃ³k gyakorlÃ¡sa";
                score = 62 + Math.floor(Math.random() * 18);
                color = "#ff9800";
            }
            else {
                // ÃltalÃ¡nos visszajelzÃ©s
                const random = Math.random();
                if (random < 0.3) {
                    message = "ğŸš« å¬ä¸æ‡‚";
                    details = "éœ€è¦å¤šç»ƒä¹ ï¼ - Gyakorolj tÃ¶bbet!";
                    score = 40 + Math.floor(Math.random() * 15);
                    color = "#e52d27";
                } else if (random < 0.7) {
                    message = "âš ï¸ å¯ä»¥æ¥å—";
                    details = "éœ€è¦æ”¹è¿›å‘éŸ³ï¼ - JavÃ­tani kell!";
                    score = 60 + Math.floor(Math.random() * 20);
                    color = "#ff9800";
                } else {
                    message = "âœ… å¾ˆå¥½æ‡‚";
                    details = "å¾ˆå¥½ï¼ç»§ç»­åŠ æ²¹ï¼ - SzÃ©p munka!";
                    score = 80 + Math.floor(Math.random() * 15);
                    color = "#4CAF50";
                }
            }
            
            resolve({
                message: message,
                details: details,
                score: score,
                color: color
            });
        }, 800);
    });
}
        // HangfelvÃ©tel kezelÃ©se - EGYSZERÅ°SÃTETT Ã‰S JAVÃTOTT
        async function startRecording() {
            try {
                recordingStatus.textContent = "âºï¸ FelvÃ©tel indÃ­tÃ¡sa...";
                
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    audio: {
                        sampleRate: 16000,
                        channelCount: 1,
                        echoCancellation: true
                    } 
                });
                
                audioChunks = [];
                mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });

                mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        audioChunks.push(event.data);
                    }
                };

                // CSAK EGY onstop esemÃ©nykezelÅ‘!
                mediaRecorder.onstop = async () => {
                    recordingStatus.textContent = "âœ… KÃ©sz, elemzÃ©s... è®²è¯ç»“æŸï¼Œåˆ†æ ..";
                    
                    if (audioChunks.length === 0) {
                        recordingStatus.textContent = "âŒ Nincs hangadat -  æ²¡æœ‰å£°éŸ³æ•°æ®";
                        return;
                    }
                    
                    const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                    const currentWord = pronunciationWords[currentWordIndex];
                    
                    try {
                        const feedback = await analyzeHungarianPronunciation(audioBlob, currentWord);
                        giveFeedback(feedback);
                        recordingStatus.textContent = "âœ… ElemzÃ©s kÃ©sz! - åˆ†æå®Œæˆï¼";
                    } catch (error) {
                        console.error("âŒ Hiba az elemzÃ©s sorÃ¡n:", error);
                        giveFeedback({ error: "Nem sikerÃ¼lt elemezni a kiejtÃ©st - æ— æ³•åˆ†æå‘éŸ³" });
                        recordingStatus.textContent = "âŒ ElemzÃ©s sikertelen - åˆ†æå¤±è´¥ï¼";
                    }
                    
                    // Stream leÃ¡llÃ­tÃ¡sa
                    stream.getTracks().forEach(track => track.stop());
                };

                mediaRecorder.start();
                isRecording = true;
                recordButton.textContent = 'â¹ï¸ Stop - åœæ­¢';
                recordButton.classList.add('recording');
                recordingStatus.textContent = "ğŸ”´ BeszÃ©lj most! - ç°åœ¨å°±è¯´è¯ï¼";
                
            } catch (error) {
                console.error('Hiba a felvÃ©telnÃ©l:', error);
                recordingStatus.textContent = "âŒ HozzÃ¡fÃ©rÃ©s megtagadva a mikrofonhoz - æ‹’ç»è®¿é—®éº¦å…‹é£";
                feedbackElement.innerHTML = 'âŒ EngedÃ©lyezd a mikrofonhoz valÃ³ hozzÃ¡fÃ©rÃ©st! - è¯·å…è®¸è®¿é—®éº¦å…‹é£ï¼';
                feedbackElement.className = 'feedback needs-work';
                feedbackElement.style.display = 'block';
            }
        }

        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                isRecording = false;
                recordButton.textContent = 'ğŸ¤ Kattints Ã©s beszÃ©lj - ç”¨åŒˆç‰™åˆ©è¯­è¯´å‡ºæ¥';
                recordButton.classList.remove('recording');
            }
        }

        // SzÃ³ felolvasÃ¡sa - magyar
        function speakWord() {
            const currentWord = pronunciationWords[currentWordIndex];
            if ('speechSynthesis' in window) {
                const speech = new SpeechSynthesisUtterance(currentWord.hungarian);
                speech.lang = 'hu-HU';
                speech.rate = 0.8;
                speech.pitch = 1;
                window.speechSynthesis.speak(speech);
            } else {
                alert("A bÃ¶ngÃ©szÅ‘ nem tÃ¡mogatja a felolvasÃ¡st! - æµè§ˆå™¨ä¸æ”¯æŒæœ—è¯»åŠŸèƒ½ï¼");
            }
        }

        // EsemÃ©nykezelÅ‘k
        recordButton.addEventListener('click', () => {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        });

        listenButton.addEventListener('click', speakWord);
        
        nextButton.addEventListener('click', () => {
            currentWordIndex = (currentWordIndex + 1) % pronunciationWords.length;
            displayWord();
            setTimeout(speakWord, 300);
        });

        // InicializÃ¡lÃ¡s
        displayWord();

        // Konzol Ã¼zenet
        console.log(`ğŸ¯ KiejtÃ©s gyakorlÃ³ betÃ¶ltve: ${pronunciationWords.length} szÃ³`);
        console.log(`ğŸ¤– AI kiejtÃ©selemzÃ©s AKTÃV - MÅ±kÃ¶dik!`);

//feedback
function giveFeedback(analysis) {
    console.log("ğŸ“¢ Intelligens visszajelzÃ©s:", analysis);
    
    if (!analysis) {
        feedbackElement.innerHTML = "âŒ åˆ†æé”™è¯¯ - Hiba az elemzÃ©s sorÃ¡n";
        feedbackElement.style.display = 'block';
        return;
    }
    
    let feedbackHTML = `
        <div style="font-size: 1.6rem; font-weight: bold; color: ${analysis.color};">
            ${analysis.message}
        </div>
        <div style="margin-top: 8px; font-size: 1.1rem;">
            ${analysis.details}
        </div>
        <div style="margin-top: 5px; font-size: 0.9rem; color: #666;">
            åˆ†æ•°: <strong>${analysis.score}/100</strong>
        </div>
    `;
    
    feedbackElement.innerHTML = feedbackHTML;
    feedbackElement.style.display = 'block';
}

    </script>
</body>
</html>